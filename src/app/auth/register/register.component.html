<div class="register-page">
  <div class="register-container">
    <div class="register-header">
      <img src="assets/images/logo.png" alt="WEB4JOBS" class="logo">
      <h1>Join Our Learning Community</h1>
      <p>Create your account to access exclusive resources and opportunities</p>
    </div>

    <mat-card class="register-card mat-elevation-z8">
      <mat-card-content>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()" *ngIf="!isSuccessful">
          <div class="form-row">
            <!-- Left Column -->
            <div class="form-column">
              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Username</mat-label>
                  <input matInput formControlName="username" required>
                  <mat-icon matPrefix>person_outline</mat-icon>
                  <mat-error *ngIf="registerForm.get('username')?.errors?.['required']">Username is required</mat-error>
                  <mat-error *ngIf="registerForm.get('username')?.errors?.['minlength']">Minimum 3 characters</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Email</mat-label>
                  <input matInput formControlName="email" type="email" required>
                  <mat-icon matPrefix>email</mat-icon>
                  <mat-error *ngIf="registerForm.get('email')?.errors?.['required']">Email is required</mat-error>
                  <mat-error *ngIf="registerForm.get('email')?.errors?.['email']">Invalid email format</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Password</mat-label>
                  <input matInput type="password" formControlName="password" required>
                  <mat-icon matPrefix>lock</mat-icon>
                  <mat-error *ngIf="registerForm.get('password')?.errors?.['required']">Password is required</mat-error>
                  <mat-error *ngIf="registerForm.get('password')?.errors?.['minlength']">Minimum 6 characters</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>First Name</mat-label>
                  <input matInput formControlName="firstName" required>
                  <mat-icon matPrefix>badge</mat-icon>
                  <mat-error *ngIf="registerForm.get('firstName')?.errors?.['required']">Required</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Last Name</mat-label>
                  <input matInput formControlName="lastName" required>
                  <mat-icon matPrefix>badge</mat-icon>
                  <mat-error *ngIf="registerForm.get('lastName')?.errors?.['required']">Required</mat-error>
                </mat-form-field>
              </div>
            </div>

            <!-- Right Column -->
            <div class="form-column">
              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Phone Number</mat-label>
                  <input matInput formControlName="phoneNumber" required>
                  <mat-icon matPrefix>phone</mat-icon>
                  <mat-error *ngIf="registerForm.get('phoneNumber')?.errors?.['required']">Required</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Address</mat-label>
                  <input matInput formControlName="address" required>
                  <mat-icon matPrefix>location_on</mat-icon>
                  <mat-error *ngIf="registerForm.get('address')?.errors?.['required']">Required</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group">
                <mat-form-field appearance="fill" class="full-width">
                  <mat-label>Centre</mat-label>
                  <mat-select formControlName="centre" required>
                    <mat-option *ngFor="let centre of centres" [value]="centre">
                      {{centre}}
                    </mat-option>
                  </mat-select>
                  <mat-icon matPrefix>school</mat-icon>
                  <mat-error *ngIf="registerForm.get('centre')?.errors?.['required']">Required</mat-error>
                </mat-form-field>
              </div>

              <div class="form-group gender-group">
                <label>Gender</label>
                <mat-radio-group formControlName="sexe" class="radio-group" required>
                  <mat-radio-button value="MALE" class="radio-button">
                    <div class="radio-content">
                      <mat-icon>male</mat-icon>
                      <span>Male</span>
                    </div>
                  </mat-radio-button>
                  <mat-radio-button value="FEMME" class="radio-button">
                    <div class="radio-content">
                      <mat-icon>female</mat-icon>
                      <span>Female</span>
                    </div>
                  </mat-radio-button>
                </mat-radio-group>
                <mat-error *ngIf="registerForm.get('sexe')?.errors?.['required'] && registerForm.get('sexe')?.touched">
                  Please select your gender
                </mat-error>
              </div>
            </div>
          </div>

          <div class="form-actions">
            <div class="alert-container">
              <div class="alert alert-danger" *ngIf="isSignUpFailed">
                <mat-icon>error</mat-icon>
                <div class="alert-content">
                  {{ errorMessage }}
                  <a routerLink="/user-register" class="register-link">Click here for user registration</a>
                </div>
              </div>
            </div>

            <button mat-raised-button color="primary" type="submit" [disabled]="registerForm.invalid" class="submit-button">
              <mat-icon>how_to_reg</mat-icon>
              Complete Registration
            </button>

            <div class="login-prompt">
              Already have an account? <a routerLink="/login">Sign In</a>
            </div>
          </div>
        </form>

        <div class="success-message" *ngIf="isSuccessful">
          <div class="success-content">
            <mat-icon class="success-icon">check_circle</mat-icon>
            <h3>Registration Successful!</h3>
            <p>You're being redirected to the login page...</p>
            <mat-progress-bar mode="indeterminate"></mat-progress-bar>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
